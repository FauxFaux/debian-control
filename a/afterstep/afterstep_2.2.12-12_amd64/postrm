#!/bin/sh
set -e
# Automatically added by dh_installdeb/11.3.5
dpkg-maintscript-helper symlink_to_dir /usr/share/doc/afterstep /usr/share/doc/afterstep-data 2.2.12-4\~ -- "$@"
# End automatically added section
# Automatically added by debian/scripts/fix_conffiles

cfgdir="/etc/menu-methods"
ucfdir="/usr/share/afterstep/ucf"
cfgfiles="afterstep.menu-method"
package="afterstep"

if [ "$1" = "purge" ] ; then
   # check is ucf is still installed  (see Bug#325905)
   which ucf >/dev/null && HAS_UCF=yes || HAS_UCF=no
   which ucfr >/dev/null && HAS_UCFR=yes || HAS_UCFR=no

   for f in $cfgfiles; do
      cf="$cfgdir/${f%.menu-method}"
      # we mimic dpkg as closely as possible, so we remove configuration
      # files with dpkg backup extensions too:
      for ext in '~' '%' .bak .ucf-new .ucf-old .ucf-dist '';  do
         rm -f "${cf}${ext}"
      done
      if [ "$HAS_UCF" = "yes"  ]; then ucf  --purge "$cf"; fi
      if [ "$HAS_UCFR" = "yes" ]; then ucfr --purge "$package" "$cf"; fi
   done

   [ ! -d "$cfgdir" ] || rmdir --parents --ignore-fail-on-non-empty "$cfgdir"
fi

# End automatically added section
# Automatically added by dh_installmenu/11.3.5
inst=/etc/menu-methods/afterstep
if [ "$1" = "remove" ] && [ -f "$inst" ]; then chmod a-x $inst ; fi
if [ -x "`which update-menus 2>/dev/null`" ]; then update-menus ; fi
# End automatically added section
