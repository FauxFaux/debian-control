#!/bin/sh

set -e

case "$1" in
    purge)
    rm -rf /var/log/canna
    # see http://lists.debian.org/debian-devel/2002/10/msg00345.html
    # debhelper might cause this script to be called twice on purge
    # therefore test, if the user exists before trying to remove it
    if getent passwd canna >/dev/null ;  then
      userdel --remove canna
    fi
    rm -f /etc/default/canna
    rm -f /etc/default/canna.dpkg-old
    rm -f /etc/hosts.canna
    rm -rf /var/lib/canna/dic/group
    rm -rf /var/lib/canna/dic/user
    rm -f /var/lib/canna/dic/canna/*.cld
    rm -f /var/lib/canna/dic/canna/*.cbd
    rm -f /var/lib/canna/dic/canna/dics.dir
    rm -f /etc/canna/dics.dir.d/00canna.dics.dir
    rm -rf /etc/canna/dics.dir.d
    #rm -rf /etc/canna
    ;;
    
    remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
    ;;
    
    *)
    ;;
esac

# Automatically added by dh_installinit/10.6.4
if [ "$1" = "purge" ] ; then
	update-rc.d canna remove >/dev/null
fi


# In case this system is running systemd, we make systemd reload the unit files
# to pick up changes.
if [ -d /run/systemd/system ] ; then
	systemctl --system daemon-reload >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_installdebconf/10.6.4
if [ "$1" = purge ] && [ -e /usr/share/debconf/confmodule ]; then
	. /usr/share/debconf/confmodule
	db_purge
fi
# End automatically added section

