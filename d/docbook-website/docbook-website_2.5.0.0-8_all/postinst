#! /bin/sh
# postinst script for docbook-website
# Maintainer: Mark Johnson <mrj@debian.org>
#

set -e

# remove old cruft, just in case
if [ "$1" = configure ]; then
    # remove the old catalog
    if [ -f /etc/sgml/docbook-xml-website.cat ]; then
        install-sgmlcatalog --quiet --remove docbook-xml-website
        rm -f /etc/sgml/docbook-xml-website.cat
        dpkg-trigger /etc/sgml
    fi

    # Skip all this if compatibility symlink exists
    if [ ! -h /usr/share/sgml/docbook/custom/website ]; then

	# Check if custom directory exists
	if [ -d /usr/share/sgml/docbook/custom ]; then
	    # Remove website directory, if it exists
	    if [ -d /usr/share/sgml/docbook/custom/website ]; then
		rm -rf /usr/share/sgml/docbook/custom/website
	    fi
	else
	    # Create custom directory
	    mkdir /usr/share/sgml/docbook/custom
	fi

	# Compatibility symlink doesn't exist, create it
	ln -s  ../../../xml/docbook/custom/website \
	    /usr/share/sgml/docbook/custom/website
    fi
    # End of symlink section
    
fi

# Automatically added by dh_installxmlcatalogs
if [ "$1" = "configure" ]; then
	update-xmlcatalog --add --type public --id "-//Norman Walsh//DTD Website" --package docbook-website --local /usr/share/xml/docbook/custom/website/2.5.0/catalog.xml
	update-xmlcatalog --add --type system --id "http://docbook.sourceforge.net/release/website" --package docbook-website --local /usr/share/xml/docbook/custom/website/2.5.0/catalog.xml

	update-xmlcatalog --add --type public --id "-//Norman Walsh//DTD Website" --package docbook-website --root
	update-xmlcatalog --add --type system --id "http://docbook.sourceforge.net/release/website" --package docbook-website --root

fi
# End automatically added section


exit 0
