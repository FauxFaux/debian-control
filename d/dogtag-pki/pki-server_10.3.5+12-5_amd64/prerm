#!/bin/sh
set -e

invoke_failure() {
    # invoke-rc.d failed, likely because no instance has been configured yet
    # but exit with an error if an instance is configured and the invoke failed
    if [ ! -d /etc/pki/pki-tomcat ]; then
        echo "... because no CA instance has been configured yet."
    else
        exit 1
    fi
}

# Automatically added by dh_systemd_start/10.10
if [ -d /run/systemd/system ]; then
	deb-systemd-invoke stop 'pki-tomcatd-nuxwdog.target' >/dev/null
fi
# End automatically added section
# Automatically added by dh_installinit/10.10
if [ -x "/etc/init.d/pki-tomcatd" ]; then
	invoke-rc.d pki-tomcatd stop || invoke_failure
fi
# End automatically added section

# Automatically added by dh_python2:
if which pyclean >/dev/null 2>&1; then
	pyclean -p pki-server 
else
	dpkg -L pki-server | grep \.py$ | while read file
	do
		rm -f "${file}"[co] >/dev/null
  	done
fi

# End automatically added section

