#!/bin/sh
set -e


case "$1" in
    # only remove in remove/deconfigure so we don't disrupt users' preferences
    remove|deconfigure)
        update-alternatives --remove org.fedoraproject.FirewallD1.policy \
	    /usr/share/polkit-1/actions/org.fedoraproject.FirewallD1.server.policy.choice
        update-alternatives --remove org.fedoraproject.FirewallD1.policy \
            /usr/share/polkit-1/actions/org.fedoraproject.FirewallD1.desktop.policy.choice
        ;;

    upgrade|failed-upgrade)
        ;;

    *)
        echo "prerm called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

# Automatically added by dh_installsystemd/11.5.3
if [ -d /run/systemd/system ] && [ "$1" = remove ]; then
	deb-systemd-invoke stop 'firewalld.service' >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_installinit/11.5.3
if [ -x "/etc/init.d/firewalld" ] && [ "$1" = remove ]; then
	invoke-rc.d --skip-systemd-native firewalld stop || exit 1
fi
# End automatically added section
# Automatically added by dh_installdeb/11.5.3
dpkg-maintscript-helper rm_conffile /etc/dbus-1/system.d/FirewallD.conf 0.6.3-4\~ -- "$@"
# End automatically added section

# Automatically added by dh_python3:
if which py3clean >/dev/null 2>&1; then
	py3clean -p firewalld 
else
	dpkg -L firewalld | perl -ne 's,/([^/]*)\.py$,/__pycache__/\1.*, or next; unlink $_ or die $! foreach glob($_)'
	find /usr/lib/python3/dist-packages/ -type d -name __pycache__ -empty -print0 | xargs --null --no-run-if-empty rmdir
fi

# End automatically added section


exit 0
