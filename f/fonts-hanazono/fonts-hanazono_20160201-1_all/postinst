#! /bin/sh
set -e

FONTCONF_FILE=64-ttf-hanazono.conf

# font alternatives
ALT_NAME_OLD="ttf-japanese-mincho"
ALT_NAME="fonts-japanese-mincho"
FONT_ENTRY="/usr/share/fonts/truetype/hanazono/HanaMinA.ttf"
FONT_PRIORITY=20

remove_old_alternate_font_entry()
{
    # remove old 'ttf-japanese-mincho' alternatives
    if [ -f /usr/share/fonts/truetype/$ALT_NAME_OLD ]; then
        rm -rf /usr/share/fonts/truetype/$ALT_NAME_OLD
    fi
    # remove old 'ttf-japanese-mincho.ttf' alternatives
    if [ -f /usr/share/fonts/truetype/$ALT_NAME_OLD.ttf ]; then
        update-alternatives --remove $ALT_NAME_OLD.ttf $FONT_ENTRY
    fi
}

add_alternate_font_entry()
{
	update-alternatives --install \
	 /usr/share/fonts/truetype/$ALT_NAME.ttf \
	 $ALT_NAME.ttf \
	 $FONT_ENTRY \
	 $FONT_PRIORITY
}

case "$1" in
    configure)
        # if old conffile exists, then remove it.
        if [ -f /etc/fonts/conf.d/${FONTCONF_FILE} ]; then
          rm /etc/fonts/conf.d/${FONTCONF_FILE}
        fi

        # alternatives
        remove_old_alternate_font_entry
        add_alternate_font_entry
        ;;

    abort-upgrade|abort-remove|abort-deconfigure)

        ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.



exit 0
