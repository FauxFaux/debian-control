#!/bin/bash
# postinst script for fortunes-fr

set -e

. /usr/share/debconf/confmodule
db_version 2.0

case "$1" in
	configure)
		FORTUNES_NAMES=("BD" \
				"Cinema" \
				"Droit" \
				"Haiku" \
				"Humoristes" \
				"Humour" \
				"Informatique" \
				"Litterature francaise" \
				"Litterature etrangere" \
				"Mysoginie" \
				"Personnalites" \
				"Philosophie" \
				"Politique" \
				"Proverbes" \
				"Religion" \
				"Sciences" \
				"Guide du Cabaliste Usenet" \
				"Guide du Debianiste Pervers" \
				"Guide du Fmblien Assassin" \
				"Guide du Linuxien Pervers" \
				"Guide du Petit Joueur" \
				"Maurice et Patapon" \
				"Oulipo" \
				"Les fortunes de Multidesk OS" \
				"Les fortunes de Multidesk OS (2)" \
				"La tribune libre de linuxfr" \
				"#linuxfr@Undernet" \
				"Les bonnes fortunes de J.R.R. Tolkien" \
				"fr.rec.photo" \
				"#debian-fr@freenode" )

		FORTUNES_FILES=("bd" \
				"cinema" \
				"droit" \
				"haiku" \
				"humoristes" \
				"humour" \
				"informatique" \
				"litterature_francaise" \
				"litterature_etrangere" \
				"mysoginie" \
				"personnalites" \
				"philosophie" \
				"politique" \
				"proverbes" \
				"religion" \
				"sciences" \
				"gcu" \
				"GDP" \
				"gfa" \
				"glp" \
				"gpj" \
				"mauriceetpatapon" \
				"oulipo" \
				"multidesk" \
				"multidesk2" \
				"tribune-linuxfr" \
				"linuxfr-undernet" \
				"tolkien_fr" \
				"fr.rec.photo" \
				"debian-fr" )

		unset RET
		db_get fortunes-fr/fortunes_to_install

		i=0
		while [ -n "${FORTUNES_NAMES[$i]}" ] ; do
			if echo "$RET" | grep -q "\(^\| \)${FORTUNES_NAMES[$i]}\(,\|$\)" ; then
				ln -sf /usr/share/games/fortunes-fr/${FORTUNES_FILES[$i]}.dat /usr/share/games/fortunes/fr/${FORTUNES_FILES[$i]}.dat
			else 
				rm -f /usr/share/games/fortunes/fr/${FORTUNES_FILES[$i]}.dat
			fi
			i=$((i + 1))
		done
	;;
	abort-upgrade|abort-remove|abort-deconfigure)
	;;

	*)
		echo "postinst called with unknown argument \`$1'" >&2
	        exit 1
	;;
esac


# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.



exit 0

