#!/bin/bash

set -e

case "$1" in
    configure)
        if [ ! -d /var/cache/gbrowse ] ; then
            mkdir -p /var/cache/gbrowse
        fi
        
        chown -R root:www-data /var/lib/gbrowse
        chmod -R 770 /var/lib/gbrowse
        chown -R root:www-data /var/cache/gbrowse
        chmod -R 770 /var/cache/gbrowse
	if [ -e /var/cache/gbrowse/sessions ]; then
        chown -R www-data:www-data /var/cache/gbrowse/sessions
	fi
        
        update-rc.d gbrowse-slave defaults > /dev/null
        update-rc.d gbrowse-aws-balancer defaults > /dev/null
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac


# Automatically added by dh_apache2
if true; then
	if [ -e /usr/share/apache2/apache2-maintscript-helper ] ; then
		. /usr/share/apache2/apache2-maintscript-helper
		for conf in gbrowse  ; do
			apache2_invoke enconf $conf  || exit $?
		done
	fi
fi
# End automatically added section


