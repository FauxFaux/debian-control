#!/bin/sh
# postrm script for geoip-database-contrib

set -e

case "$1" in
    purge)
        rm -f /etc/cron.d/geoip-database-contrib
        if which ucf > /dev/null
        then
            ucf --purge /etc/cron.d/geoip-database-contrib
        fi

        if [ -f /usr/share/debconf/confmodule ]; then
            . /usr/share/debconf/confmodule
            db_purge
        fi

        rmdir /etc/cron.d 2> /dev/null || true
    ;;

    remove)
    if [ -x /usr/bin/killall ]; then
        killall -9 -q geoip-database-contrib_update || true
    fi

    rm -f /var/lib/geoip-database-contrib/GeoIP.dat.gz
    rm -f /var/lib/geoip-database-contrib/GeoIPv6.dat.gz
    rm -f /var/lib/geoip-database-contrib/GeoLiteCity.dat.gz
    rm -f /var/lib/geoip-database-contrib/GeoIPASNum.dat.gz
    rm -f /var/lib/geoip-database-contrib/GeoIP.dat
    rm -f /var/lib/geoip-database-contrib/GeoIPv6.dat
    rm -f /var/lib/geoip-database-contrib/GeoLiteCity.dat
    rm -f /var/lib/geoip-database-contrib/GeoIPASNum.dat
    rm -f /var/lib/geoip-database-contrib/GeoIPASNumv6.dat
    rm -f /var/lib/geoip-database-contrib/GeoLiteCityv6.dat
    ;;
esac

# Automatically added by dh_installdebconf
if [ "$1" = purge ] && [ -e /usr/share/debconf/confmodule ]; then
	. /usr/share/debconf/confmodule
	db_purge
fi
# End automatically added section


exit 0
