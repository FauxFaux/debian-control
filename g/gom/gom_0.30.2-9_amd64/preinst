#!/bin/sh -e

# Automatically added by dh_installdeb/11.2.1
dpkg-maintscript-helper rm_conffile /etc/init.d/gom -- "$@"
# End automatically added section


# All below is only cleaning up deprecated files from old package versions.

#
# Policy 11.7.3 (templates), since 0.29.103-10
#
# dpkg would not delete dir share/doc/gom/examples/default, and, when installing files, would not
# overwrite it with a symlink to share/gom/default. Rather a dpkg bug, afaik.
# This fixes this simply and hopefully sanely.

# This is no longer dir, but symlink to share/gom/default
old_default_cfg="/usr/share/doc/gom/examples/default"
if [ -d "${old_default_cfg}" ]; then
	rm -rf ${old_default_cfg}
fi

case "$1" in
	upgrade|install)
		rcboot_file=/etc/rc.boot/gom
		if [ -e ${rcboot_file} ]; then
			. /usr/share/debconf/confmodule
			db_input critical gom/remove_obsolete_rcboot || true
			db_go || true
			db_get gom/remove_obsolete_rcboot || true
			if [ "$RET" = true ]; then
				rm -f ${rcboot_file}
			fi
		fi
		;;
esac

# All support for alternatives dropped, always remove
update-alternatives --remove gom /usr/bin/gom-c
update-alternatives --remove gom /usr/bin/gom-ct
update-alternatives --remove gom /usr/bin/gom-ctx
