#! /bin/sh -e
#
# prerm script for Debian python packages.
# Written 1998 by Gregor Hoffleit <flight@debian.org>.
#
# $URL: svn+ssh://svn.debian.org/svn/pkg-mailman/trunk/debian/prerm $
# $Id: prerm 786 2016-04-25 16:44:55Z thijs $

if [ "$1" = "failed-upgrade" ] ; then
  if [ -x "/etc/init.d/mailman" ]; then
    if [ -x "`which invoke-rc.d 2>/dev/null`" ]; then
      invoke-rc.d mailman stop || true
    else
      /etc/init.d/mailman stop || true
    fi
  fi
  chmod -x /usr/lib/mailman/bin/mailmanctl
fi

# Automatically added by dh_installinit
if [ -x "/etc/init.d/mailman" ]; then
	invoke-rc.d mailman stop || exit $?
fi
# End automatically added section

# Automatically added by dh_python2:
if which pyclean >/dev/null 2>&1; then
	pyclean -p mailman 
else
	dpkg -L mailman | grep \.py$ | while read file
	do
		rm -f "${file}"[co] >/dev/null
  	done
fi

# End automatically added section

