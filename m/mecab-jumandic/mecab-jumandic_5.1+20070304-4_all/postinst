#! /bin/sh
# postinst script for mecab-jumandic
#
# see: dh_installdeb(1)

set -e

srcdir=/usr/share/mecab/dic/juman
dstdir=/var/lib/mecab/dic/juman
encoding=EUC-JP

case "$1" in
    configure)
	echo "Compiling Juman dictionary for Mecab.  This takes long time..."
	/usr/lib/mecab/mecab-dict-index -d ${srcdir} -o ${dstdir} -f EUC-JP -t ${encoding}
	test -f ${dstdir}/dicrc && rm ${dstdir}/dicrc
	if [ ${encoding} = 'EUC-JP' ]; then
	    ln -s ${srcdir}/dicrc ${dstdir}/dicrc
	    priority=30
	else
	    sed "s,EUC-JP,${encoding},g" ${srcdir}/dicrc > ${dstdir}/dicrc
	    priority=40
	fi
	update-alternatives --install /var/lib/mecab/dic/debian mecab-dictionary ${dstdir} ${priority}
	;;
    abort-upgrade|abort-remove|abort-deconfigure)
	;;
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.



exit 0
