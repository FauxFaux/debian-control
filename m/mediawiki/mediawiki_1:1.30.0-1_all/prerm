#!/bin/sh
# From MirOS: contrib/hosted/tg/deb/jupp/debian/jupp.prerm,v 1.4 2011/09/06 20:07:39 tg Exp $

set -e

case $1 in
remove|deconfigure|upgrade|failed-upgrade)
	# Cleanup old mediawiki.ini
	# This is intentionally PHP5 only, it was never installed
	# for PHP7.
	if [ -e "/usr/share/php5/php5-maintscript-helper" ]; then
		. /usr/share/php5/php5-maintscript-helper
		php5_invoke dismod ALL mediawiki
	fi
	;;

*)
	echo >&2 "prerm called with unknown subcommand '$1'"
	exit 1
	;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

# Automatically added by dh_installdeb/11.2.1
dpkg-maintscript-helper rm_conffile /etc/php5/mods-available/mediawiki.ini 1:1.27.0-1 -- "$@"
# End automatically added section
# Automatically added by dh_systemd_start/11.2.1
if [ -d /run/systemd/system ] && [ "$1" = remove ]; then
	deb-systemd-invoke stop 'mediawiki-jobrunner.service' >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_apache2/UNDECLARED
if [ "$1" = "remove" ] || [ "$1" = "deconfigure" ] ; then
	if true; then
		if [ -e /usr/share/apache2/apache2-maintscript-helper ] ; then
			. /usr/share/apache2/apache2-maintscript-helper

			for conf in mediawiki  ; do
				apache2_invoke disconf $conf  || exit 1
			done
		fi
	fi
fi
# End automatically added section


exit 0
