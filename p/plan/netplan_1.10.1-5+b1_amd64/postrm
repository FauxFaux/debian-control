#!/bin/sh -e

#
# plan post-removal script
#

# Remove the netplan user and delete netplan's homedir /var/lib/plan
if [ "$1" = "purge" ] ; then
    echo >&2 "Removing user netplan"
    userdel netplan || echo >&2 "WARNING: Problem removing user netplan."
fi

# Remove the netplan group
if [ "$1" = "purge" ] && grep -q '^netplan:[^:]*:63434' /etc/group ; then
    echo >&2 "Removing group netplan"
    groupdel netplan || echo >&2 "WARNING: Problem removing group netplan."
fi

# Removing /var/lib/plan ant files in /etc
if [ "$1" = "purge" ] ; then
    echo >&2 "Removing /var/lib/plan"
    rm -rf /var/lib/plan /etc/plan/netplan-acl
fi

# Automatically added by dh_installinit
if [ "$1" = "purge" ] ; then
	update-rc.d netplan remove >/dev/null
fi


# In case this system is running systemd, we make systemd reload the unit files
# to pick up changes.
if [ -d /run/systemd/system ] ; then
	systemctl --system daemon-reload >/dev/null || true
fi
# End automatically added section

