#!/bin/sh
# preinst script for proofgeneral
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <new-preinst> `install'
#        * <new-preinst> `install' <old-version>
#        * <new-preinst> `upgrade' <old-version>
#        * <old-preinst> `abort-upgrade' <new-version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package


# get rid of old configuration files which make newer version break
# Note that this has already been done in the old version 3.7-4.
if [ "$1" = "upgrade" ]; then
    if dpkg --compare-versions $2 lt 3.8 ; then
	rm -f /etc/emacs/site-start.d/50proofgeneral.el
    fi
fi


# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

# Automatically added by dh_installemacsen
if ( [ "$1" = "install" ] || [ "$1" = "upgrade" ] ) \
	&& [ -e /var/lib/emacsen-common/state/package/installed/emacsen-common -a -x /usr/lib/emacsen-common/emacs-package-install ]
then
	/usr/lib/emacsen-common/emacs-package-install --preinst proofgeneral
fi
# End automatically added section


exit 0
