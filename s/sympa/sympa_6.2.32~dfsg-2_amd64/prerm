#!/bin/sh

#
# prerm script for sympa
#

set -e

if [ -f /usr/share/debconf/confmodule ]; then
    . /usr/share/debconf/confmodule
fi

if [ -f /usr/share/dbconfig-common/dpkg/prerm ]; then
    . /usr/share/dbconfig-common/dpkg/prerm
    dbc_go sympa $@
fi

if [ "$1" = "remove" ]; then
    rm -f /etc/mail/smrsh/bouncequeue /etc/mail/smrsh/queue
fi

if which dpkg-maintscript-helper >/dev/null && dpkg-maintscript-helper supports rm_conffile ; then
    dpkg-maintscript-helper rm_conffile /etc/sympa/data_structure.version \
        "6.1.11~dfsg-1~" -- "$@"
fi

# Automatically added by dh_installsystemd/11.3.5
if [ -d /run/systemd/system ] && [ "$1" = remove ]; then
	deb-systemd-invoke stop 'sympa-task_manager.service' >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_installsystemd/11.3.5
if [ -d /run/systemd/system ] && [ "$1" = remove ]; then
	deb-systemd-invoke stop 'sympa-bulk.service' >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_installsystemd/11.3.5
if [ -d /run/systemd/system ] && [ "$1" = remove ]; then
	deb-systemd-invoke stop 'sympa-archived.service' >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_installsystemd/11.3.5
if [ -d /run/systemd/system ] && [ "$1" = remove ]; then
	deb-systemd-invoke stop 'sympa-bounced.service' >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_installinit/11.3.5
if [ -x "/etc/init.d/sympa" ] && [ "$1" = remove ]; then
	invoke-rc.d sympa stop || exit 1
fi
# End automatically added section
# Automatically added by dh_installdeb/11.3.5
dpkg-maintscript-helper rm_conffile /etc/sympa/sympa/sympa.conf 6.2.16\~dfsg-2\~ -- "$@"
dpkg-maintscript-helper rm_conffile /etc/sympa/sympa.conf-smime.in 6.2.16\~dfsg-4\~ -- "$@"
# End automatically added section


exit 0
