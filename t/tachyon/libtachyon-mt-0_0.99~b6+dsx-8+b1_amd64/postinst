#!/bin/sh
set -e
add_libvariant_alternative () {
	local libvariant=$1
	local libpriority=$2
	update-alternatives \
		--install \
			/usr/lib/x86_64-linux-gnu/libtachyon.so.0 \
			libtachyon.so.0 \
			/usr/lib/x86_64-linux-gnu/libtachyon-${libvariant}.so.0 $libpriority \
		--slave /usr/lib/x86_64-linux-gnu/libtachyon.so.0.0.0 \
			libtachyon.so.0.0.0 \
			/usr/lib/x86_64-linux-gnu/libtachyon-${libvariant}.so.0.0.0
	return 0
	}
for LIBVARIANT in mt-openmp mt-thr; do
			case $LIBVARIANT in
			serial)         LIBPRIORITY=10 ;;
			mt-openmp)      LIBPRIORITY=110 ;;
			mt-thr)         LIBPRIORITY=150 ;;
			mpich-openmp)   LIBPRIORITY=210 ;;
			mpich-thr)      LIBPRIORITY=250 ;;
			mpich)          LIBPRIORITY=290 ;;
			openmpi-openmp) LIBPRIORITY=310 ;;
			openmpi-thr)    LIBPRIORITY=350 ;;
			openmpi)        LIBPRIORITY=390 ;;
				*) echo "unknown library variant \'${LIBVARIANT}': skip" >&2 ;;
			esac
	add_libvariant_alternative $LIBVARIANT $LIBPRIORITY
done

exit 0
