#!/bin/sh
set -e

. /usr/share/debconf/confmodule

CONFIGFILE=/etc/default/xfstt

if [ "$1" = configure ]; then
	db_get xfstt/listen_tcp || true

	case "$RET" in
	true)	RET=yes
		;;
	false)	RET=no
		;;
	esac

	if [ -e $CONFIGFILE ]; then
		sed -e "s/^ *LISTEN_TCP=.*/LISTEN_TCP=\"$RET\"/" \
			< $CONFIGFILE > $CONFIGFILE.tmp
		mv -f $CONFIGFILE.tmp $CONFIGFILE
	else
		(
		echo "# Defaults for xfstt init.d script"
		echo "#"
		echo "# Valid values are: yes no"
		echo "LISTEN_TCP=\"$RET\""
		) > $CONFIGFILE
	fi
fi

# Automatically added by dh_installinit
if [ "$1" = "configure" ] || [ "$1" = "abort-upgrade" ]; then
	if [ -x "/etc/init.d/xfstt" ]; then
		update-rc.d xfstt defaults >/dev/null
		invoke-rc.d xfstt start || exit $?
	fi
fi
# End automatically added section


db_stop

exit 0
